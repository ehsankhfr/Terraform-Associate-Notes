### üì¶ Terraform Provisioners ‚Äì Multiple Choice Questions

1. What is the primary purpose of Terraform provisioners?  
A) Track resource changes  
B) Bootstrap custom scripts and commands  
C) Manage Terraform backend  
D) Encrypt state files  

2. When should Terraform provisioners be used?  
A) Always for any task  
B) Only when the declarative model cannot handle a task  
C) For defining variables  
D) To store remote state  

3. What happens if a provisioner returns a non-zero exit code?  
A) Terraform applies the plan successfully  
B) Terraform marks the resource as tainted  
C) Terraform ignores it  
D) Terraform destroys the resource immediately  

4. Which of the following executes commands on the local machine?  
A) remote-exec  
B) local-exec  
C) file provisioner  
D) terraform-exec  

5. Which of the following executes commands on a remote instance (e.g., EC2)?  
A) local-exec  
B) file provisioner  
C) remote-exec  
D) module-exec  

6. What must be configured for `remote-exec` to work?  
A) Backend storage  
B) Resource count  
C) Connection block (e.g., SSH details)  
D) Module outputs  

7. Which block in Terraform is used to define SSH connection details?  
A) `access`  
B) `connection`  
C) `ssh`  
D) `credentials`  

8. What is the purpose of the `inline` argument in `remote-exec`?  
A) To run scripts stored locally  
B) To pass a list of commands to be executed remotely  
C) To reference input variables  
D) To attach files to the resource  

9. How do you execute a local shell script using `local-exec`?  
A) Use `inline` with `local-exec`  
B) Use `script = "./myscript.sh"`  
C) Use `command = "bash ./myscript.sh"`  
D) Terraform doesn't support shell scripts  

10. Which of the following is **NOT** a valid provisioner type?  
A) `remote-exec`  
B) `local-exec`  
C) `file`  
D) `state-exec`  

---

### üîê Behavior and Best Practices

11. Why are provisioners considered a last resort in Terraform?  
A) They slow down state operations  
B) They require more memory  
C) Terraform cannot track changes made by them  
D) They cannot be used in modules  

12. Which provisioner allows you to copy a script to a remote server?  
A) local-exec  
B) remote-exec  
C) file  
D) state-push  

13. What happens if a provisioner fails and `on_failure = continue` is set?  
A) Terraform exits with an error  
B) Terraform retries until success  
C) Terraform continues applying the rest of the configuration  
D) Terraform rolls back everything  

14. How do you prevent Terraform from failing if a provisioner fails?  
A) Ignore the error  
B) Use `on_failure = "continue"`  
C) Use `fallback = true`  
D) It's not possible  

15. What does "tainted" mean in the context of Terraform provisioners?  
A) The resource was destroyed  
B) The resource must be re-created in the next apply  
C) The resource is manually edited  
D) The resource state is out of sync  

---

### üß™ Examples and Real Use Cases

16. Which of these would correctly install `nginx` using `remote-exec`?  
A) `command = "nginx install"`  
B) `inline = ["sudo apt update", "sudo apt install -y nginx"]`  
C) `run = ["nginx"]`  
D) `exec = ["install nginx"]`  

17. In what scenario would you typically use `local-exec`?  
A) To install software on a remote VM  
B) To upload a file to S3  
C) To trigger a local shell script after a resource is created  
D) To destroy a local resource  

18. How would you debug a failed `local-exec` provisioner?  
A) Check the .terraform directory  
B) Use `terraform plan` again  
C) Review the Terraform log output  
D) You cannot debug it  

19. Which provisioner would best suit running `ansible-playbook` on your local system after provisioning a server?  
A) remote-exec  
B) file  
C) local-exec  
D) exec-ansible  

20. Which key is **mandatory** for connecting to a remote server via SSH in a `connection` block?  
A) `host`  
B) `inline`  
C) `output`  
D) `backend`  

---

### ‚ö†Ô∏è Edge Cases and Gotchas

21. Can provisioners be used in a Terraform module?  
A) No  
B) Yes, but not recommended  
C) Only in root module  
D) Only with `local-exec`  

22. What‚Äôs a safer alternative to provisioners when installing software on a VM?  
A) Use `local-exec` only  
B) Use Terraform `output` blocks  
C) Use Packer to pre-bake images  
D) Use variables instead  

23. Which block is required when defining a `remote-exec` provisioner in `aws_instance`?  
A) `provider`  
B) `output`  
C) `connection`  
D) `backend`  

24. What happens if a provisioner is declared in a destroyed resource?  
A) It‚Äôs ignored  
B) It will still execute  
C) It causes a runtime error  
D) It‚Äôs replaced by default  

25. Can `local-exec` be used to trigger external services like Slack notifications or APIs?  
A) No  
B) Yes, by executing curl or script commands  
C) Only in modules  
D) Only using Terraform Cloud  

---

### üß© Advanced Usage

26. How would you use `file` provisioner to copy a file to a remote server?  
A) `file = "./file.txt"`  
B) `source = "./file.txt", destination = "/tmp/file.txt"`  
C) `copy = ["file.txt"]`  
D) `upload = "./file.txt"`  

27. How many provisioners can you define per resource?  
A) One  
B) Two  
C) Unlimited  
D) Only local-exec and remote-exec  

28. Which of the following provisioner types supports the `interpreter` argument?  
A) file  
B) remote-exec  
C) local-exec  
D) terraform output  

29. What would happen if a `remote-exec` fails during a `terraform apply`?  
A) The entire apply fails  
B) The state is updated  
C) It falls back to the last successful state  
D) It automatically retries  

30. Which of the following commands can help view logs of provisioner execution?  
A) `terraform plan`  
B) `terraform state`  
C) `terraform apply -auto-approve`  
D) `TF_LOG=DEBUG terraform apply`  

| #  | Question (Topic)                         | Answer | Explanation |
|----|------------------------------------------|--------|-------------|
| 1  | Purpose of provisioners                  | B      | Provisioners are used to run custom scripts or commands **after** resource creation. |
| 2  | When to use provisioners                 | B      | Provisioners are a **last resort**, used when Terraform can't perform an action natively. |
| 3  | Non-zero return code                     | B      | A non-zero exit code causes the resource to be **tainted**, meaning it will be destroyed and recreated on next apply. |
| 4  | Executes on local machine                | B      | `local-exec` runs the command **locally**, where Terraform is being executed. |
| 5  | Executes on remote machine               | C      | `remote-exec` runs commands **on the provisioned resource**, like an EC2 instance. |
| 6  | Needed for remote-exec                   | C      | To connect remotely, Terraform needs **connection info** like SSH details or WinRM. |
| 7  | SSH connection block                     | B      | The `connection` block specifies **how Terraform connects** to the remote machine. |
| 8  | Purpose of `inline`                      | B      | The `inline` argument lets you pass a **list of commands** to run remotely in order. |
| 9  | Running a shell script locally           | C      | You can use `local-exec` to run **any shell script** or CLI tool. |
| 10 | Invalid provisioner type                 | D      | `cloud-exec` is **not a valid provisioner**. Only `local-exec` and `remote-exec` are. |
| 11 | Why last resort                          | B      | Provisioners are not tracked by Terraform, so changes are **not visible** to Terraform. |
| 12 | SSH keys for remote                      | A      | Terraform connects using **SSH private keys** to access remote machines. |
| 13 | Windows instance remote provisioner      | C      | **WinRM** is used instead of SSH for Windows provisioning. |
| 14 | Taint behavior                           | A      | Tainted resources are **destroyed and recreated**. |
| 15 | Cleanup after creation                   | C      | Use a provisioner to perform **cleanup tasks**, like deleting temp files. |
| 16 | Outputting text locally                  | A      | You can use `local-exec` with `echo` to **print to the local terminal**. |
| 17 | Unsupported retry mechanism              | B      | `local-exec` doesn't support `on_failure` or `retry_*`. That's only for `remote-exec`. |
| 18 | local-exec in a module                   | A      | Provisioners **can** be used in modules, but it's discouraged. |
| 19 | Invalid provisioner field                | C      | `script_file` is **not a valid field**; use `script` or `inline`. |
| 20 | Remote command best practice             | B      | Use `inline` for short commands, and `script` for **longer, reusable scripts**. |
| 21 | Order of execution                       | A      | `create` happens after resource creation; `destroy` before resource deletion. |
| 22 | local-exec runs even if unchanged?       | B      | `local-exec` **always runs** on apply, regardless of resource changes. |
| 23 | remote-exec use case                     | C      | Installing software like **Nginx** on an EC2 instance is a classic use case. |
| 24 | Provisioners & configuration drift       | B      | Provisioners can cause **drift** because Terraform can‚Äôt track their changes. |
| 25 | Prevent provisioner on destroy           | A      | Use `when = "create"` to **run only on creation**, not destruction. |
| 26 | Which runs after destroy                 | D      | `when = "destroy"` lets you run logic **before the resource is deleted**. |
| 27 | Set env vars in local exec               | C      | Use `environment` block to pass **environment variables** to the local script. |
| 28 | remote-exec + Ansible                    | B      | You can **invoke Ansible** with remote-exec if Terraform alone can‚Äôt configure everything. |
| 29 | Provisioners best used for               | D      | Use them for **initialization/configuration tasks** not handled natively. |
| 30 | Using provisioners in production         | C      | It‚Äôs **discouraged** in production, as it breaks declarative best practices. |
